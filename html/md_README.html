<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CellsMD3D: README file</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CellsMD3D
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">README file </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h5></h5>
<h1><a class="anchor" id="autotoc_md1"></a>
how to compile and run the cpp code?</h1>
<h1><a class="anchor" id="autotoc_md2"></a>
(1) compile the code:</h1>
<h1><a class="anchor" id="autotoc_md3"></a>
$&gt; cd run_sim</h1>
<h1><a class="anchor" id="autotoc_md4"></a>
$&gt; g++ ../*.cpp -fopenmp -O3</h1>
<h1><a class="anchor" id="autotoc_md5"></a>
(2) run the code:</h1>
<h1><a class="anchor" id="autotoc_md6"></a>
$&gt; ./a.out in1.txt 2 /Direcotry/To/Output/Folder &gt; /Redirect/Console/Output &amp;</h1>
<h4><a class="anchor" id="autotoc_md7"></a>
The command line argument in1.txt is the input txt file.</h4>
<h4><a class="anchor" id="autotoc_md8"></a>
The command line argument 2 means we run this code using 2 cores. You can change it to some other numbers.</h4>
<h4><a class="anchor" id="autotoc_md9"></a>
The command line argument "/Direcotry/To/Output/Folder" is the directory to output the data.</h4>
<h4><a class="anchor" id="autotoc_md10"></a>
The command line argument "&gt; /Redirect/Console/Output &amp;" means console outpout gets redirected to "/Redirect/Console/Output", and the program runs in background.</h4>
<h6></h6>
<h1><a class="anchor" id="autotoc_md11"></a>
don't blow up the memory</h1>
<h1><a class="anchor" id="autotoc_md12"></a>
If you run the code in a local machine, and you don't want to take up too much memory, you need to set the variable MaxCells to be small, say 100000. If you set it to be 3 millions, then it might take up a lot of memory.</h1>
<h1><a class="anchor" id="autotoc_md13"></a>
To adjust MaxCells, you just go to in1.txt, and change the integer number that is next to "MaxCells".</h1>
<h6></h6>
<h1><a class="anchor" id="autotoc_md14"></a>
how is the data output?</h1>
<h1><a class="anchor" id="autotoc_md15"></a>
We have a global variable DirName (Defined in Constants.h), which takes in the 4th command line argument. The output is stored in the path given by DirName.</h1>
<h1><a class="anchor" id="autotoc_md16"></a>
Under the DirName, there will be folders as the following:</h1>
<h1><a class="anchor" id="autotoc_md17"></a>
AgarField     Density       Density2      Height        Restart       RoughDensity1 WallDensity   WallDensity2  lineage</h1>
<h1><a class="anchor" id="autotoc_md18"></a>
Cells         Density1      Environment   Normal        RoughDensity  RoughDensity2 WallDensity1  WallField</h1>
<h1><a class="anchor" id="autotoc_md19"></a>
In each folder, there will be data files such as:</h1>
<h1><a class="anchor" id="autotoc_md20"></a>
0.txt   110.txt 123.txt 136.txt 149.txt 161.txt 174.txt 187.txt 2.txt   211.txt 224.txt 237.txt 25.txt  262.txt 275.txt 4.txt   52.txt  65.txt  78.txt  90.txt</h1>
<h1><a class="anchor" id="autotoc_md21"></a>
1.txt   111.txt 124.txt 137.txt 15.txt  162.txt 175.txt 188.txt 20.txt  212.txt 225.txt 238.txt 250.txt 263.txt 28.txt  40.txt  53.txt  66.txt  79.txt  91.txt</h1>
<h1><a class="anchor" id="autotoc_md22"></a>
10.txt  112.txt 125.txt 138.txt 150.txt 163.txt 176.txt 189.txt 200.txt 213.txt 226.txt 239.txt 251.txt 264.txt 29.txt  41.txt  54.txt  67.txt  8.txt   92.txt</h1>
<h1><a class="anchor" id="autotoc_md23"></a>
100.txt 113.txt 126.txt 139.txt 151.txt 164.txt 177.txt 19.txt  201.txt 214.txt 227.txt 24.txt  252.txt 265.txt 3.txt   42.txt  55.txt  68.txt  80.txt  93.txt</h1>
<h1><a class="anchor" id="autotoc_md24"></a>
101.txt 114.txt 127.txt 14.txt  152.txt 165.txt 178.txt 190.txt 202.txt 215.txt 228.txt 240.txt 253.txt 266.txt 30.txt  43.txt  56.txt  69.txt  81.txt  94.txt</h1>
<h1><a class="anchor" id="autotoc_md25"></a>
102.txt 115.txt 128.txt 140.txt 153.txt 166.txt 179.txt 191.txt 203.txt 216.txt 229.txt 241.txt 254.txt 267.txt 31.txt  44.txt  57.txt  7.txt   82.txt  95.txt</h1>
<h1><a class="anchor" id="autotoc_md26"></a>
103.txt 116.txt 129.txt 141.txt 154.txt 167.txt 18.txt  192.txt 204.txt 217.txt 23.txt  242.txt 255.txt 268.txt 32.txt  45.txt  58.txt  70.txt  83.txt  96.txt</h1>
<h1><a class="anchor" id="autotoc_md27"></a>
104.txt 117.txt 13.txt  142.txt 155.txt 168.txt 180.txt 193.txt 205.txt 218.txt 230.txt 243.txt 256.txt 269.txt 33.txt  46.txt  59.txt  71.txt  84.txt  97.txt</h1>
<h1><a class="anchor" id="autotoc_md28"></a>
105.txt 118.txt 130.txt 143.txt 156.txt 169.txt 181.txt 194.txt 206.txt 219.txt 231.txt 244.txt 257.txt 27.txt  34.txt  47.txt  6.txt   72.txt  85.txt  98.txt</h1>
<h1><a class="anchor" id="autotoc_md29"></a>
106.txt 119.txt 131.txt 144.txt 157.txt 17.txt  182.txt 195.txt 207.txt 22.txt  232.txt 245.txt 258.txt 270.txt 35.txt  48.txt  60.txt  73.txt  86.txt  99.txt</h1>
<h1><a class="anchor" id="autotoc_md30"></a>
107.txt 12.txt  132.txt 145.txt 158.txt 170.txt 183.txt 196.txt 208.txt 220.txt 233.txt 246.txt 259.txt 271.txt 36.txt  49.txt  61.txt  74.txt  87.txt</h1>
<h1><a class="anchor" id="autotoc_md31"></a>
108.txt 120.txt 133.txt 146.txt 159.txt 171.txt 184.txt 197.txt 209.txt 221.txt 234.txt 247.txt 26.txt  272.txt 37.txt  5.txt   62.txt  75.txt  88.txt</h1>
<h1><a class="anchor" id="autotoc_md32"></a>
109.txt 121.txt 134.txt 147.txt 16.txt  172.txt 185.txt 198.txt 21.txt  222.txt 235.txt 248.txt 260.txt 273.txt 38.txt  50.txt  63.txt  76.txt  89.txt</h1>
<h1><a class="anchor" id="autotoc_md33"></a>
11.txt  122.txt 135.txt 148.txt 160.txt 173.txt 186.txt 199.txt 210.txt 223.txt 236.txt 249.txt 261.txt 274.txt 39.txt  51.txt  64.txt  77.txt  9.txt</h1>
<h6></h6>
<h1><a class="anchor" id="autotoc_md34"></a>
how to visualize the output data?</h1>
<h1><a class="anchor" id="autotoc_md35"></a>
We visualize the data using MATLAB, and in this section, we will write MATLAB commands:</h1>
<h1><a class="anchor" id="autotoc_md36"></a>
You can load the data by something like the following:</h1>
<h1><a class="anchor" id="autotoc_md37"></a>
$&gt; dir_cells='/Direcotry/To/Output/Folder';</h1>
<h1><a class="anchor" id="autotoc_md38"></a>
$&gt; i_cells=250;</h1>
<h1><a class="anchor" id="autotoc_md39"></a>
$&gt; cells=load(sprintf('%s/Cells/%d.txt',dir_cells,i_cells));</h1>
<h1><a class="anchor" id="autotoc_md40"></a>
You can find out the indices of the cells whose center of mass has height less than 2um by the following command:</h1>
<h1><a class="anchor" id="autotoc_md41"></a>
$&gt; dh = 2;</h1>
<h1><a class="anchor" id="autotoc_md42"></a>
$&gt; i_btm = find((cells(:,6)+cells(:,9))/2&lt;dh);</h1>
<h1><a class="anchor" id="autotoc_md43"></a>
You can find out the indices of cells whose center of mass has height less than 2um, with type 1 and type 2 by the following command:</h1>
<h1><a class="anchor" id="autotoc_md44"></a>
$&gt; i1 = find(cells(i_btm,3)==1);</h1>
<h1><a class="anchor" id="autotoc_md45"></a>
$&gt; i2 = find(cells(i_btm,3)==2);</h1>
<h1><a class="anchor" id="autotoc_md46"></a>
You can plot all such cells with stick representation and different color by the following command:</h1>
<h1><a class="anchor" id="autotoc_md47"></a>
$&gt; quiver3(cells(i_btm(i1),4), cells(i_btm(i1),5), cells(i_btm(i1),6), cells(i_btm(i1),7)-cells(i_btm(i1),4), cells(i_btm(i1),8)-cells(i_btm(i1),5), cells(i_btm(i1),9)-cells(i_btm(i1),6), 'b', 'ShowArrowHead','off', 'Autoscale','off');</h1>
<h1><a class="anchor" id="autotoc_md48"></a>
$&gt; hold on;</h1>
<h1><a class="anchor" id="autotoc_md49"></a>
$&gt; quiver3(cells(i_btm(i2),4), cells(i_btm(i2),5), cells(i_btm(i2),6), cells(i_btm(i2),7)-cells(i_btm(i2),4), cells(i_btm(i2),8)-cells(i_btm(i2),5), cells(i_btm(i2),9)-cells(i_btm(i2),6), 'r', 'ShowArrowHead','off', 'Autoscale','off');</h1>
<h1><a class="anchor" id="autotoc_md50"></a>
You can adjust the view angles of the plot by:</h1>
<h1><a class="anchor" id="autotoc_md51"></a>
$&gt; view(0,90);</h1>
<h6></h6>
<h1><a class="anchor" id="autotoc_md52"></a>
where is the information about cell division, cell age stored?</h1>
<h1><a class="anchor" id="autotoc_md53"></a>
Cell ages and division time of the two ends are stored in columns 24-27 of the output files under Cells folder. You may refer to the last a few lines of InputOutput.cpp for more details.</h1>
<h6></h6>
<h1><a class="anchor" id="autotoc_md54"></a>
how do I set the level of grids and choose the Box_x, Box_y, Box_z, and Box_z_agar?</h1>
<h1><a class="anchor" id="autotoc_md55"></a>
There is a parameter maxLevels in in1.txt file that specifies the level of grids. I usually choose maxLevels to be 2~4. Usually we want Box_x=Box_y with mod(Box_x,4)=0, and mod(Box_z_agar,4)=0.</h1>
<h6></h6>
<h1><a class="anchor" id="autotoc_md56"></a>
how shall I properly read the AgarField and WallField data? (Let's assume that we have Box_x=Box_y=128 and Box_z_agar=20)</h1>
<h1><a class="anchor" id="autotoc_md57"></a>
Read the AgarField data:</h1>
<h1><a class="anchor" id="autotoc_md58"></a>
$&gt; agar=load(sprintf('%s/AgarField/%d.txt',dir_cells,i_cells));</h1>
<h1><a class="anchor" id="autotoc_md59"></a>
break the data into trunks (corresponds to different levels of the grid):</h1>
<h1><a class="anchor" id="autotoc_md60"></a>
$&gt; agar0=agar(1:end/4,:);</h1>
<h1><a class="anchor" id="autotoc_md61"></a>
$&gt; agar1=agar(1+end/4:end/2,:);</h1>
<h1><a class="anchor" id="autotoc_md62"></a>
$&gt; agar2=agar(1+end/2:end*3/4,:);</h1>
<h1><a class="anchor" id="autotoc_md63"></a>
$&gt; agar3=agar(1+end*3/4:end,:);</h1>
<h1><a class="anchor" id="autotoc_md64"></a>
reshape the matrices:</h1>
<h1><a class="anchor" id="autotoc_md65"></a>
$&gt; agar0=reshape(agar0, Box_y, 2*Box_z_agar, Box_x);</h1>
<h1><a class="anchor" id="autotoc_md66"></a>
$&gt; agar1=reshape(agar1, Box_y, 2*Box_z_agar, Box_x);</h1>
<h1><a class="anchor" id="autotoc_md67"></a>
$&gt; agar2=reshape(agar2, Box_y, 2*Box_z_agar, Box_x);</h1>
<h1><a class="anchor" id="autotoc_md68"></a>
$&gt; agar3=reshape(agar3, Box_y, 2*Box_z_agar, Box_x);</h1>
<h1><a class="anchor" id="autotoc_md69"></a>
Define the carbon fields:</h1>
<h1><a class="anchor" id="autotoc_md70"></a>
$&gt; carb0=agar0(:,1:end/2,:);</h1>
<h1><a class="anchor" id="autotoc_md71"></a>
$&gt; carb1=agar1(:,1:end/2,:);</h1>
<h1><a class="anchor" id="autotoc_md72"></a>
$&gt; carb2=agar2(:,1:end/2,:);</h1>
<h1><a class="anchor" id="autotoc_md73"></a>
$&gt; carb3=agar3(:,1:end/2,:);</h1>
<h1><a class="anchor" id="autotoc_md74"></a>
Then we fill in the part of higher level grid that should be covered by the lower level grid:</h1>
<h1><a class="anchor" id="autotoc_md75"></a>
$&gt; carb1(Box_y/4+1:Box_y*3/4, 1:Box_z_agar/2, Box_x/4+1:Box_x*3/4)=carb0(1:2:Box_y, 2:2:Box_z_agar, 1:2:Box_x);</h1>
<h1><a class="anchor" id="autotoc_md76"></a>
$&gt; carb2(Box_y/4+1:Box_y*3/4, 1:Box_z_agar/2, Box_x/4+1:Box_x*3/4)=carb1(1:2:Box_y, 2:2:Box_z_agar, 1:2:Box_x);</h1>
<h1><a class="anchor" id="autotoc_md77"></a>
$&gt; carb3(Box_y/4+1:Box_y*3/4, 1:Box_z_agar/2, Box_x/4+1:Box_x*3/4)=carb2(1:2:Box_y, 2:2:Box_z_agar, 1:2:Box_x);</h1>
<h1><a class="anchor" id="autotoc_md78"></a>
Then you can visualize the carbon field data in different levels, for example:</h1>
<h1><a class="anchor" id="autotoc_md79"></a>
$&gt; imagesc(reshape(carb1(:,1,:), Box_y, Box_x));</h1>
<h1><a class="anchor" id="autotoc_md80"></a>
$&gt; imagesc(reshape(carb2(Box_y/2,:,:), Box_z_agar, Box_x));</h1>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
